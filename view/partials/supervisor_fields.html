<div class="border p-3 mb-3 rounded shadow-sm">
    <h5 class="border-bottom pb-2 mb-4">Configurações de Supervisor</h5>
    
    <!-- Formulário principal para valor da sessão e horários -->
    <form hx-post="/api/supervisor/update-profile" 
          hx-target="#message-container">
        
        <!-- Valor da Sessão -->
        <div class="mb-4">
            <label class="form-label fw-bold">Valor da Sessão</label>
            <div class="input-group">
                <span class="input-group-text">R$</span>
                <input type="number" class="form-control" name="session_price" step="0.01" min="0" value="{{printf "%.2f" .SessionPrice}}">
            </div>
        </div>

        <!-- Horários por Dia da Semana -->
        <div class="mb-4">
            <h5 class="mb-3">Horários por Dia da Semana</h5>
            {{range $day := .WeekDays}}
            <div class="row mb-3 align-items-center">
                <div class="col-md-3">
                    <label class="form-label mb-0">{{formatWeekday $day}}</label>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-clock"></i></span>
                        <input type="time" class="form-control" 
                               name="start_time_{{$day}}" 
                               value="{{index $.WeeklyHours $day "start_time"}}">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-clock"></i></span>
                        <input type="time" class="form-control" 
                               name="end_time_{{$day}}" 
                               value="{{index $.WeeklyHours $day "end_time"}}">
                    </div>
                </div>
            </div>
            {{end}}
        </div>

        <!-- Botão Salvar do formulário principal -->
        <div class="text-end mt-4">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save me-2"></i>
                Salvar Configurações
            </button>
        </div>
    </form>

    <!-- Formulário separado para períodos de disponibilidade -->
    <div class="mb-4 mt-5">
        <h5 class="mb-3">Períodos de Disponibilidade</h5>
        <div class="alert alert-info mb-3">
            <i class="fas fa-info-circle me-2"></i>
            Defina os períodos em que você estará disponível para supervisões.
        </div>
        
        <form hx-post="/api/supervisor/availability-periods" 
              hx-target="#availability-periods"
              hx-swap="beforeend"
              onsubmit="return validateDates(this)">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Data Início</label>
                    <input type="date" class="form-control" name="availability_start" 
                           min="{{now}}" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Data Fim</label>
                    <input type="date" class="form-control" name="availability_end" 
                           min="{{now}}" required>
                </div>
            </div>
            
            <button type="submit" class="btn btn-outline-primary">
                <i class="fas fa-plus me-2"></i>
                Adicionar Período
            </button>
        </form>

        <!-- Lista de períodos -->
        <div id="availability-periods" class="mt-3">
            {{range .AvailabilityPeriods}}
                {{template "partials/availability_period.html" .}}
            {{end}}
        </div>
    </div>
</div>

<script>
function validateDates(form) {
    const start = form.availability_start.value;
    const end = form.availability_end.value;
    
    if (start > end) {
        alert('A data inicial deve ser anterior à data final');
        return false;
    }
    return true;
}
</script> 